{% extends "customer_base.html" %}

{% block title %}Find Your Menu{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="text-center p-5 bg-white rounded shadow-sm">
            <div class="mb-4 text-primary" style="font-size: 5rem;">
                <i class="bi bi-qr-code-scan"></i>
            </div>
            <h1 class="fw-bold">Welcome!</h1>
            <p class="lead text-muted">Please scan a QR code, or enter your restaurant and table details below.</p>
            
            <form id="manual-entry-form" class="mt-4">
                <div class="mb-3">
                    <label for="restaurant-slug" class="form-label">Restaurant Code</label>
                    <input type="text" id="restaurant-slug" class="form-control" placeholder="e.g. joes-pizza" required>
                </div>
                <div class="mb-3">
                    <label for="table-number" class="form-label">Table Number (for Dine-In)</label>
                    <input type="text" id="table-number" class="form-control" placeholder="e.g. 15">
                    <div class="form-text">Leave blank for Take-Away orders.</div>
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Find Menu</button>
                </div>
            </form>
            <hr class="my-4">
            <p class="small text-muted">If you are a restaurant owner, please <a href="{{ url_for('admin.landing') }}">log in here</a>.</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('manual-entry-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const slug = document.getElementById('restaurant-slug').value.trim();
        const table = document.getElementById('table-number').value.trim();
        
        if (slug) {
            let url = `/qrlink/${slug}`;
            if (table) {
                url += `?table=${table}`;
            }
            window.location.href = url;
        } else {
            alert('Please enter a restaurant code.');
        }
    });
</script>
{% endblock %}